;CONVERT ONE BYTE NUMBER FROM BINARY  TO BASE SELECTED BY P1
	ORG	0000H
	LJMP	MAIN
RESULT	EQU	30H
MAIN:
	CLR P1.0
	CLR P1.1
	ACALL	GET_NUM
	ACALL	GET_BASE
	ACALL	DISPLAY
	LJMP	ENDI

GET_NUM:
	MOV	DPTR, #NUM
	RET

GET_BASE:
	JNB	P1.0, BCD1
	ACALL	BINARY_TO_HEX1
	RET
BCD1:
	JNB	P1.1, BCD2
	ACALL	BINARY_TO_BCD1
	RET
BCD2:
	JNB	P1.2, NONE
	ACALL	BINARY_TO_BCD2
	RET
NONE:
	RET


BINARY_TO_HEX1:
	CLR	A
	MOVC	A, @A+DPTR
	MOV	R7, A
	ANL	A, #0FH
	MOV	RESULT, A
	MOV	A, R7
	SWAP	A
	ANL	A, #0FH
	MOV	RESULT+1, A
	RET 

BINARY_TO_BCD1:
	CLR	A
	MOVC	A, @A+DPTR
	MOV B, #10
	DIV AB
	MOV RESULT, B 
	MOV B, #10
	DIV AB
	MOV RESULT+1, B 
	MOV RESULT+2,A 

	RET

BINARY_TO_BCD2:
	CLR	A
	MOVC	A, @A+DPTR
	MOV B, #10
	DIV AB
	MOV R0, B 
	MOV B,#10
	DIV AB
	PUSH ACC
	MOV A,B 
	SWAP A
	ADD A, R0
	MOV RESULT, A
	POP ACC
	MOV RESULT+1, A 
	RET

DISPLAY:
	MOV	P0, RESULT+2
	MOV	P2, RESULT+1
	MOV	P3, RESULT
	RET

NUM:	DB	0FFH, 0FFH
ENDI:	END

