; ROWS CONNNECTED TO P2, COLUMNS TO P3
;ROW BYTES OF THE FIRUES ARE STORED IN DB, PIN P1.0 SELECTES BETWEEN FIGURE 1 OR 2, MULTIPLEXING IS DONE WITH INTERRRUPTS. 

	ORG	0000H
	LJMP	INIT
	ORG	000BH
	LJMP	T0ISR

;
T0ISR:
	MOV	TH0, #0F6H
	MOV	TL0, #31H
	SETB	C
	MOV	00, C
	RETI

;
INIT:
	MOV	TMOD, #01H
	MOV	TH0, #0F6H
	MOV	TL0, #31H
	SETB	EA
	SETB	ET0
;
MAIN:
	ACALL	DISPLAY_FIGURE
	SJMP	MAIN

;
DISPLAY_FIGURE:
	MOV	B, #0FEH
	MOV	R7, #8
COLUMNS:
	MOV	P3, B
	ACALL	DISPLAY_ROWS
	SETB	C
	RLC	A
	MOV	B, A
	DJNZ	R7, COLUMNS
	RET


;
DISPLAY_ROWS:
	ACALL	GET_FIGURE
	MOV	R6, #8
ROWS:
	CLR	A
	MOVC	A, @A+DPTR
	MOV	P2, A
	JNB	00, $
	CLR	C
	MOV	00, C
	INC	DPTR
	DJNZ	R6, ROWS
	RET

;
GET_FIGURE:
	JB	P1.0, FIGURE2
	MOV	DPTR, #FIG1
	RET
FIGURE2:
	MOV	DPTR, #FIG2
	RET

FIG1:	DB	20, 30, 40, 50, 50, 70, 80, 90
FIG2:	DB	90, 8, 7, 6, 5, 4, 3, 2


