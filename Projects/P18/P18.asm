; DATA RECEPTION THROUGH RX AT BR = 9600BPS, DATA TRANSMISSION THROUGH P1.0 AT A BR ~ 9600 BPS
;
	ORG	0000H
	LJMP	INIT

INIT:
	MOV	SCON, #50H
	MOV	TMOD, #20H
	MOV	TH1, #252	; -3 FOR 9600BPS
	SETB	TR1

MAIN:
	ACALL	RECEIVE
	ACALL	TRANSMIT
	SJMP	MAIN

RECEIVE:
	JNB	RI, $
	CLR	RI
	MOV	A, SBUF
	RET

TRANSMIT:
	CLR	C
	MOV	R0, #8
ALL_BITS:
	RLC	A
	MOV	P1.0, C
	ACALL	DELAY_105US	; AT A DELAY OF 105US THE BR ~ 9600BPS
	DJNZ	R0, ALL_BITS
	RET

DELAY_105US:
	MOV	R7, #51
	DJNZ	R7, $
	RET

	END
