	ORG	0000H
LENGTH	EQU	20H
MAIN:

	ACALL	LOAD_WORD	; STORE WORD TO SEARCH IN 30H @R0
	MOV	A, P2		;READ PORT 2 STATE TO SELECT LIST
	ANL	A, #03H
	ACALL	GET_LIST
	MOV	R7, #1
NEXT_WORD:
	ACALL	GET_WORD_FROM_LIST	; STORE WORD FROM LIST IN 40H @R1
	MOV	R0, #30H
	MOV	R1, #40H
	ACALL	COMPARE_WORD
	JC	MATCH_FOUND
	INC	R7
	SJMP	NEXT_WORD

MATCH_FOUND:
	MOV	P1, R7
	LJMP	END

COMPARE_WORD:
	MOV	A, @R0
	CJNE	A, #0, VAZHDO
	SETB	C
	RET
VAZHDO:
	MOV	50H, A
	MOV	A, @R1
	CJNE	A, 50H, RETURN
	INC	R0
	INC	R1
	SJMP	COMPARE_WORD

RETURN:
	INC	DPTR
	CLR	C
	RET


GET_WORD_FROM_LIST:
OUTER_LOOP:	MOV	R1, #40H
	CLR	A
	MOVC	A, @A+DPTR
	MOV	LENGTH, A
INNER_LOOP:	CLR	A
	INC	DPTR
	MOVC	A, @A+DPTR
	CJNE	A, #0, CONTINUEE
	SJMP	END
CONTINUEE:
	MOV	@R1, A
	INC	R1
	DJNZ	LENGTH, INNER_LOOP
	RET

LOAD_WORD:
	MOV	DPTR, #FJALA
	MOV	R0, #30H
L:	CLR	A
	MOVC	A, @A+DPTR
	INC	DPTR
	CJNE	A, #00H, CONTINUE
	RET
CONTINUE:	MOV	@R0, A
	INC	R0
	SJMP	L



GET_LIST:
	CJNE	A, #0, CH1
	MOV	DPTR, #LIST0
	RET
CH1:
	CJNE	A, #1, CH2
	MOV	DPTR, #LIST1
	RET
CH2:
	CJNE	A, #2, CH3
	MOV	DPTR, #LIST2
	RET
CH3:
	MOV	DPTR, #LIST3
	RET


FJALA:	DB	'SEARCH', 00

LIST0:	DB	3, 'KJO'
	DB	4, 'TEST'
	DB	6, 'SEARCH'
	DB	0
LIST1:	DB	3, 'KJO'
	DB	6, 'SEARCH'
	DB	0
LIST2:	DB	3, 'KJO'
	DB	6, 'SEARCH'
	DB	0
LIST3:	DB	3, 'KJO'
	DB	6, 'SEARCH'
	DB	0
END:	END
