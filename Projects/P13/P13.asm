; IC 74HC165 IS CONNECTED TO PORT 1 OF THE MICROCONTROLLER, READ THE EXTENDED INPUTS, AND DISPLAY THEM ON THE 7-SEGMENT BCD CONNECTED TO P2

	ORG	0000H
	LJMP	MAIN

SHLD	EQU	P1.2
SD	EQU	P1.1
CLK	EQU	P1.0

MAIN:
	ACALL	READ_DATA
	ACALL	DISPLAY_DATA
	SJMP	MAIN

READ_DATA:
	CLR	SHLD		; LOAD DATA INTO IC
	SETB	SHLD		; SHIFT DATA OUT OF IC
	MOV	R0, #8
ALL_BITS:
	SETB	CLK
	CLR	CLK
	MOV	C, P1.1
	RLC	A
	DJNZ	R0, ALL_BITS
	RET

DISPLAY_DATA:
	CLR	C
	ADD	A, #0
	DA	A
	MOV	P2, A
	RET

	END


