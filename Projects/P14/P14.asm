;P1.1 = HIGH =>SHOW NUMBER ON THE 4 7 SEGMENT DISPLAYS CA , BLINK IT f=4HZ
; P2 = 7 SEGMENT CATHODES, P3 = 7SEGMENT ANODES

	ORG	0000H
	LJMP	INIT
	ORG	000BH
	LJMP	T0ISR

T0ISR:
	CLR	TR0
	MOV	TH0, #9CH
	MOV	TL0, #59H

	DJNZ	R0, RETURNI
	MOV	P3, #00H
	ACALL	DELAY_125MS
	MOV	R0, 5
RETURNI:
	SETB	TR0
	RETI

DELAY_125MS:
	MOV	R7, #250
L1:
	MOV	R6, #250
	DJNZ	R6, $
	DJNZ	R7, L1
	RET
INIT:
	MOV	TMOD, #9CH
	MOV	TH0, #59H
	MOV	TL0, #0B1H
	SETB	EA
	SETB	ET0
MAIN:
	MOV	P3, #00H
	JNB	P1.1, $
    SETB TR0
	ACALL	SHOW_NUMBER
	SJMP	MAIN

SHOW_NUMBER:
	MOV	P2, #0F9H
	SETB	P3.0
	ACALL	DELAY_2MS
	CLR	P3.0

	MOV	P2, #0A4H
	SETB	P3.1
	ACALL	DELAY_2MS
	CLR	P3.1

	MOV	P2, #0B0H
	SETB	P3.2
	ACALL	DELAY_2MS
	CLR	P3.2

	MOV	P2, #99H
	SETB	P3.3
	ACALL	DELAY_2MS
	CLR	P3.4
	SJMP	SHOW_NUMBER


DELAY_2MS:
	MOV	R5, #100
L2MS:
	MOV	R6, #10
	DJNZ	R6, $
	DJNZ	R7, L2MS
	RET
	END


